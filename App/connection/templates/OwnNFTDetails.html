<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap"rel="stylesheet"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/own.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/activity.css') }}"/>
    <title>Token Details</title>
  </head>

  <body>
    <div class="page-title">
      <h3>Token Details</h3>
      <img
        class="detail-img"
        src="{{icon}}"
        width="300"
        height="300"
        ,
        style="text-align: center"
      />
    </div>

    <div class="machine-session">
      <h3>Contract Address {{contractAddress}}</h3>

      {% if typeOfToken == "machine" %}
      <h3>Token ID {{tokenId}}</h3>
      <h3>Contract Owner {{contractOwner}}</h3>
      <h3>Token Owner {{tokenOwner}}</h3>
      {% endif %} {% if typeOfToken == "patient" %}
      <h3>Patient Address {{tokenId}}</h3>
      <h3>Prescription Token {{prescriptionContractAddress}}</h3>
      <h3>Data Token {{dataContractAddress}}</h3>
      {% endif %} {% if typeOfToken == "prescription" %}
      <h3>Token ID {{tokenId}}</h3>
      <h3>Owner(Doctor) {{contractOwner}}</h3>
      <a href="{{metaDataUrl}}">
        <h3>Link to MetaData</h3>
      </a>
      {% endif %} {% if typeOfToken == "data" %}
      <h3>Token ID {{tokenId}}</h3>
      <h3>Owner(Patient) {{contractOwner}}</h3>
      <a href="{{metaDataUrl}}">
        <h3>Link to MetaData</h3>
      </a>
      <div class="button-container">
        <a href="{{ url_for('displayData', metaDataUrl=metaDataUrl[21:]) }}">
          <button class="btn" id="generate-button">Generate graphs</button>
        </a>
      </div>
      {% endif %}
    </div>

    {% if typeOfToken != "patient" %}


    <div class="items_activity">

        <div class="table-container">

            <div class="table">
              <div class="table-header">
                <div class="header__item">
                  <a id="wins" class="filter__link filter__link--number">Event</a>
                </div>
                <div class="header__item">
                  <a id="losses" class="filter__link filter__link--number">From</a>
                </div>
                <div class="header__item">
                  <a id="total" class="filter__link filter__link--number">To</a>
                </div>
                <div class="header__item">
                    <a id="losses" class="filter__link filter__link--number">Age</a>
                  </div>
              </div>


              <div class="table-content">

                {% for activity in Activity[::-1] %}
                
                    <div class="table-row">
                      <!-- event  -->
                      <div class="table-data">{{activity.event}}</div>
                      <!-- from address-->
                      {% if activity._from == "NullAddress" or  activity._from == "" %}
                          <div class="table-data">{{activity._from}}</div>
                      {% else %}
                        <div class="table-data">{{activity._from[:6]}}
                          <span class="table-data-hover">{{activity._from}}</span>
                        </div>
                      {% endif %}
                      <!-- to address -->
                      <div class="table-data">{{activity._to[:6]}}
                        <span class="table-data-hover">{{activity._to}}</span>
                      </div>
                      <!-- Age -->
                      <div class="table-data">{{activity.age}} ago</div>
                    </div>
                {% endfor %}
              </div>

            </div>

          </div>

    </div>

    {% endif %}


  </body>
</html>
